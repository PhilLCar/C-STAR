#include <stream.h>

#include <stdio.h>
#include <stdlib.h>

#include <str.h>

////////////////////////////////////////////////////////////////////////////////
char sgetc(Stream *s)
{
  return s->getc(s->stream);
}

////////////////////////////////////////////////////////////////////////////////
void sungetc(char c, Stream *s)
{
  s->ungetc(c, s->stream);
}

////////////////////////////////////////////////////////////////////////////////
void sclose(Stream *s)
{
  s->close(s->stream);
  free(s);
}


////////////////////////////////////////////////////////////////////////////////
String *sgetline(Stream *s)
{
	String *line = newString("");
	char c;

	while((c = sgetc(s)) != '\n' && c != EOF) append(line, c);

	if (c == EOF && !line->length) {
		deleteString(&line);
	}

  return line;
}