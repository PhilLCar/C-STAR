#include <stream.h>
#include <stdio.h>

////////////////////////////////////////////////////////////////////////////////
char sgetc(Stream *s)
{
  return s->getc(s->stream);
}

////////////////////////////////////////////////////////////////////////////////
void sungetc(char c, Stream *s)
{
  s->ungetc(c, s->stream);
}

////////////////////////////////////////////////////////////////////////////////
void sclose(Stream *s)
{
  s->close(s->stream);
  free(s);
}


////////////////////////////////////////////////////////////////////////////////
String *sgetl(Stream *s)
{
  String *s = newString("");
	char    c;

	while((c = sgetc(s)) != '\n' && c != EOF) append(s, c);

  return s;
}

////////////////////////////////////////////////////////////////////////////////
Array *sgeta(Stream *s)
{
	Array  *array = newArray(sizeof(String*));
	String *line;

	if (array) while ((line = sgetl(s))->length > 0) push(array, line);

	return array;
}

////////////////////////////////////////////////////////////////////////////////
void sskipl(Stream *s)
{
	while (sgetc(s) != '\n');
}